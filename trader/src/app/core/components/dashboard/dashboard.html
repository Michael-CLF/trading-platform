<section class="space-y-4">
    <h1 class="text-xl font-semibold">Dashboard</h1>

    <ng-container *ngIf="loading(); else contentTpl">
        <div class="opacity-70 text-sm">Loading…</div>
    </ng-container>

    <button (click)="loadWatchlist()" [disabled]="loading()">Refresh</button>

    <div *ngIf="loading()" class="opacity-70 mt-2">Loading quotes…</div>
    <div *ngIf="error()" class="text-red-400 mt-2">{{ error() }}</div>

    <ul *ngIf="!loading() && !error() && quotes().length">
        <li *ngFor="let q of quotes()">
            {{ q.symbol }} — {{ q.price | number:'1.2-2' }}
        </li>
    </ul>

    <div *ngIf="!loading() && !error() && !quotes().length" class="opacity-70">
        No quotes returned.
    </div>


    <ng-template #contentTpl>
        <ng-container *ngIf="!error(); else errorTpl">
            <div class="grid gap-6 sm:grid-cols-3 lg:grid-cols-3">
                <div class="rounded-lg border border-white/10 p-4" *ngFor="let q of quotes()">
                    <div class="flex items-center justify-between">
                        <!-- inside your *ngFor card header -->
                        <div class="text-xs px-2 py-0.5 rounded"
                            [ngStyle]="(q?.change ?? 0) >= 0
              ? { 'background-color': '#00c85322', color: '#ffffff' } : { 'background-color': '#c00000', color: '#ffffff' }">
                            %
                        </div>


                    </div>

                    <div class="mt-1 text-2xl font-semibold">
                        {{ q.price | number:'1.2-2' }}
                    </div>

                    <div class="mt-1 text-xs opacity-60">
                        {{ q.asOf | date:'yyyy-MM-dd HH:mm' }}
                    </div>
                </div>
            </div>
        </ng-container>
    </ng-template>

    <ng-template #errorTpl>
        <div class="text-red-400 text-sm">{{ error() }}</div>
    </ng-template>
</section>