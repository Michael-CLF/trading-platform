<header class="lc-header">
    <div class="title">Live Candles</div>
    <div class="subtitle">15-minute candles (last 60 bars) â€” select one symbol</div>

    <div class="toolbar">
        <button class="pill" (click)="selectNone()">None</button>

        <!-- Single-select: radios hidden, pill spans styled; click drives selection -->
        <label class="sym" *ngFor="let s of symbols" (click)="toggle(s)">
            <input type="radio" name="symbol" class="sr-only" [checked]="selected() === s" aria-label="{{ s }}" />
            <span [class.active]="selected() === s">{{ s }}</span>
        </label>
    </div>
</header>

<section class="lc-canvas-wrap">
    @if (chartInfo()) {
    <div class="chart-info-panel">
        <div class="info-symbol">{{ chartInfo()!.symbol }}</div>
        <div class="info-price" [class.positive]="chartInfo()!.priceChange >= 0"
            [class.negative]="chartInfo()!.priceChange < 0">
            ${{ chartInfo()!.currentPrice.toFixed(2) }}
            <span class="price-change">
                {{ chartInfo()!.priceChange >= 0 ? '+' : '' }}{{ chartInfo()!.priceChange.toFixed(2) }}
                ({{ chartInfo()!.priceChangePercent >= 0 ? '+' : '' }}{{ chartInfo()!.priceChangePercent.toFixed(2) }}%)
            </span>
        </div>
        <div class="info-stats">
            <div class="stat">
                <span class="stat-label">High</span>
                <span class="stat-value">${{ chartInfo()!.high.toFixed(2) }}</span>
            </div>
            <div class="stat">
                <span class="stat-label">Low</span>
                <span class="stat-value">${{ chartInfo()!.low.toFixed(2) }}</span>
            </div>
            <div class="stat">
                <span class="stat-label">Open</span>
                <span class="stat-value">${{ chartInfo()!.open.toFixed(2) }}</span>
            </div>
        </div>
    </div>
    }
    <canvas #candleCanvas class="lc-canvas"></canvas>
</section>