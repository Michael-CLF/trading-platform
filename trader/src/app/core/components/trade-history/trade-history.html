<!-- src/app/core/components/trade-history/trade-history.html -->

<section class="th-toolbar">
    <div class="symbols">
        <button *ngFor="let s of symbols" class="pill" [class.active]="selected() === s" (click)="selectSymbol(s)">
            {{ s }}
        </button>
    </div>

    <div class="ranges">
        <button *ngFor="let r of ranges" class="range" [class.active]="selectedRange() === r.id"
            (click)="selectRange(r.id)">
            {{ r.label }}
        </button>
    </div>
</section>

<!-- Empty state -->
<section class="th-empty" *ngIf="!selected(); else chart">
    <p>Select a symbol to view historical performance.</p>
</section>

<ng-template #chart>
    <svg class="th-chart" [attr.viewBox]="'0 0 ' + viewW + ' ' + viewH" [attr.width]="viewW" [attr.height]="viewH"
        role="img" aria-label="Historical line chart">

        <!-- frame -->
        <rect [attr.x]="padLeft" [attr.y]="padTop" [attr.width]="innerW()" [attr.height]="innerH()" class="frame"
            rx="10" ry="10"></rect>

        <!-- grid y -->
        <g class="grid-y">
            <line *ngFor="let t of yTicks()" [attr.x1]="padLeft" [attr.x2]="padLeft + innerW()" [attr.y1]="t.y"
                [attr.y2]="t.y" />
        </g>

        <!-- axis y labels -->
        <g class="axis-y">
            <text *ngFor="let t of yTicks()" [attr.x]="padLeft - 8" [attr.y]="t.y + 4" text-anchor="end">
                {{ t.label }}
            </text>
        </g>

        <!-- the line -->
        <path class="series" [attr.d]="linePath()"></path>

        <!-- x-axis labels -->
        <g class="axis-x">
            <text *ngFor="let t of xTicks()" [attr.x]="t.x" [attr.y]="viewH - padBottom + 18" text-anchor="middle">
                {{ t.label }}
            </text>
        </g>
    </svg>
</ng-template>