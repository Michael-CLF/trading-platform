<div class="p-6">
    <h2 class="text-xl mb-4">Positions</h2>

    <div *ngIf="loading()">Loadingâ€¦</div>

    <table *ngIf="!loading() && rows().length" class="w-full border-collapse">
        <thead>
            <tr class="text-left border-b border-gray-700">
                <th class="py-2 px-3">Symbol</th>
                <th class="py-2 px-3">Qty</th>
                <th class="py-2 px-3">Avg Price</th>
                <th class="py-2 px-3">Last</th>
                <th class="py-2 px-3">Cost Basis</th>
                <th class="py-2 px-3">Market Value</th>
                <th class="py-2 px-3">P/L</th>
                <th class="py-2 px-3">P/L %</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let r of rows()">
                <td class="py-2 px-3">{{ r.symbol }}</td>
                <td class="py-2 px-3">{{ r.qty | number:'1.0-0' }}</td>
                <td class="py-2 px-3">{{ r.avgPrice | currency:'USD':'symbol':'1.2-2' }}</td>
                <td class="py-2 px-3">{{ r.lastPrice | currency:'USD':'symbol':'1.2-2' }}</td>
                <td class="py-2 px-3">{{ r.costBasis | currency:'USD':'symbol':'1.2-2' }}</td>
                <td class="py-2 px-3">{{ r.marketValue | currency:'USD':'symbol':'1.2-2' }}</td>
                <td class="py-2 px-3">{{ r.pnl | currency:'USD':'symbol':'1.2-2' }}</td>
                <td class="py-2 px-3">{{ r.pnlPct | percent:'1.1-2' }}</td>
            </tr>
        </tbody>
        <tfoot class="border-t border-gray-700">
            <tr>
                <td class="py-2 px-3" colspan="4">Totals</td>
                <td class="py-2 px-3">{{ totalCostBasis() | currency:'USD' }}</td>
                <td class="py-2 px-3">{{ totalMarketValue() | currency:'USD' }}</td>
                <td class="py-2 px-3">{{ totalPnL() | currency:'USD' }}</td>
                <td class="py-2 px-3"></td>
            </tr>
        </tfoot>
    </table>

    <div *ngIf="!loading() && !rows().length" class="opacity-70">No positions.</div>
</div>